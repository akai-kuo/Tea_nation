// ========================================
// Banner 外層 — 1920 x 1000
// ========================================
.hero-carousel {
  width: 100%;
  aspect-ratio: 1920 / 1000;
  margin: 0 auto;

  @media (max-width: 767.98px) {
    aspect-ratio: 3 / 4;
    overflow: hidden;
    margin-top: 62px;
  }

  .carousel-inner {
    @media (max-width: 767.98px) {
      height: 100%;
    }
  }

  .carousel-item {
    position: relative;

    .carousel-bg {
      width: 100%;
      height: auto;
      display: block;

      @media (max-width: 767.98px) {
        height: 100%;
        object-fit: cover;
      }
    }

    @media (max-width: 767.98px) {
      height: 100%;
    }
  }

  // ========================================
  // Caption 定位層 — 撐滿 carousel-item
  // ========================================
  .carousel-caption {
    position: absolute !important;
    top: 0 !important;
    bottom: 0 !important;
    left: 2.083% !important;  // 40/1920
    right: 2.083% !important; // 40/1920
    padding: 0 !important;
    display: flex !important;
    justify-content: center;
    align-items: center;
    z-index: 10;

    @media (max-width: 767.98px) {
      left: 5% !important;
      right: 5% !important;
    }

    // ========================================
    // Container 內層 — 1296 x 1000
    // ========================================
    .caption-container {
      width: clamp(280px, 67.5vw, 1296px);  // 1296/1920
      max-width: 100%;
      height: 100%;
      display: flex;
      align-items: center;

      @media (max-width: 767.98px) {
        width: 100%;
        align-items: flex-start;
      }
    }

    // ========================================
    // Left — Indicators
    // ========================================
    .caption-left {
      position: static;

      .carousel-indicators {
        position: absolute;
        bottom: 2%;    // 20/1000
        left: 14.78%;  // 272/1840 (距離 banner 左邊 312px)
        display: flex;
        flex-direction: column;
        gap: clamp(4px, 0.417vw, 8px); // 8/1920
        margin: 0;
        padding: 0;
        z-index: 15;

        @media (max-width: 767.98px) {
          left: 0;
          bottom: 4%;
        }

        [data-bs-target] {
          width: 2px !important;
          height: 2px !important;
          border: 0 !important;
          border-top: 0 !important;
          border-bottom: 0 !important;
          border-radius: 50%;
          background-color: #fff !important;
          opacity: 0.4;
          transition: all 0.3s ease;
          cursor: pointer;
        }
        [data-bs-target].active {
          width: 2px !important;
          height: clamp(30px, 3.125vw, 60px) !important; // 60/1920
          border: 0 !important;
          border-top: 0 !important;
          border-bottom: 0 !important;
          background-color: #fff !important;
          border-radius: 0;
          opacity: 1;

          @media (max-width: 767.98px) {
            height: 40px !important;
          }
        }
      }
    }

    // ========================================
    // Right — 佔滿剩餘空間
    // ========================================
    .caption-right {
      flex: 1;
      height: 100%;
      position: relative;
    }

    // ========================================
    // Align Variants — 每張輪播圖不同定位
    // center: 置中（預設）
    // right: 靠右
    // left: 靠左
    // ========================================
    .caption-align-center {
      .caption-content {
        right: 38.12%;  // 預設置中
      }
      .caption-bottom {
        right: 45.29%;  // 預設置中
      }
    }

    .caption-align-right {
      .caption-content {
        right: 5%;
      }
      .caption-bottom {
        right: 12%;
      }
    }

    .caption-align-left {
      .caption-content {
        right: auto;
        left: 5%;
      }
      .caption-bottom {
        right: auto;
        left: 5%;
      }
    }

    // ========================================
    // Content — 絕對定位，等比縮放
    // ========================================
    .caption-content {
      position: absolute;
      top: 12%;       // 120/1000
      display: flex;
      flex-direction: column;
      gap: clamp(40px, 4.167vw, 80px); // 80/1920

      @media (max-width: 767.98px) {
        top: 10%;
        right: auto;
        left: 50%;
        transform: translateX(-50%);
      }
    }

    .caption-top {
      display: flex;
      flex-direction: row;
      gap: clamp(12px, 1.25vw, 24px); // 24/1920
      align-items: flex-start;

      @media (max-width: 767.98px) {
        gap: 12px;
      }
    }

    .caption-body {
      padding-top: clamp(40px, 4.167vw, 80px); // 80/1920
      display: flex;
      flex-direction: column;
      gap: clamp(12px, 1.25vw, 24px); // 24/1920

      @media (max-width: 767.98px) {
        padding-top: 20px;
      }
    }

    .caption-subtitle {
      margin: 0;
      font-family: 'Noto Sans TC', sans-serif;
      font-weight: 400;
      font-size: clamp(12px, 0.833vw, 16px); // 16/1920
      line-height: 150%;
      letter-spacing: clamp(4px, 0.417vw, 8px); // 8/1920
      text-align: start;
      writing-mode: vertical-rl;
      text-orientation: upright;
      white-space: pre-line;

      @media (max-width: 767.98px) {
        font-size: 12px;
        letter-spacing: 4px;
      }
    }

    .caption-title-box {
      overflow: hidden;
    }

    .caption-title {
      margin: 0;
      font-family: 'Noto Serif TC', serif;
      font-weight: 700;
      font-size: clamp(24px, 2.083vw, 40px); // 40/1920
      line-height: 120%;
      letter-spacing: 0.02em;
      text-align: center;
      writing-mode: vertical-rl;
      text-orientation: upright;

      @media (max-width: 767.98px) {
        font-size: 24px;
      }
    }

    // ========================================
    // Bottom — 120 x 240
    // 距 content 左右各 93px，icon 距 banner 底部 168px
    // ========================================
    .caption-bottom {
      position: absolute;
      top: 64%;         // 640/1000 (content top 12% + 間距 520/1000 = 52%)
      width: clamp(60px, 6.25vw, 120px);   // 120/1920
      height: clamp(120px, 12.5vw, 240px); // 240/1920
      display: flex;
      flex-direction: column;
      gap: clamp(12px, 1.25vw, 24px); // 24/1920
      align-items: center;

      @media (max-width: 767.98px) {
        right: auto;
        left: 50%;
        transform: translateX(-50%);
        top: auto;
        bottom: 8%;
        width: 48px;
        height: auto;
        gap: 12px;
      }
    }

    .caption-bn-name {
      font-family: 'Noto Serif TC', serif;
      font-weight: 400;
      font-size: clamp(12px, 0.833vw, 16px); // 16/1920
      line-height: 150%;
      letter-spacing: 0.04em;
      text-align: center;
      writing-mode: vertical-rl;
      text-orientation: upright;

      @media (max-width: 767.98px) {
        font-size: 12px;
      }
    }

    .icon-button-outline {
      width: clamp(60px, 6.25vw, 120px);   // 120/1920
      height: clamp(60px, 6.25vw, 120px);  // 120/1920
      border-radius: 1000px;
      border: 1px solid var(--color-neutral-700, #404040);
      background: transparent;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;

      @media (max-width: 767.98px) {
        width: 48px;
        height: 48px;
      }

      img {
        width: clamp(12px, 1.25vw, 24px);    // 24/1920 (內含 6×12 向量)
        height: clamp(12px, 1.25vw, 24px);   // 24/1920

        @media (max-width: 767.98px) {
          width: 16px;
          height: 16px;
        }
      }
    }
  }
}
